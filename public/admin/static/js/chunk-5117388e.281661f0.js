(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5117388e"],{"073a":function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.bannerForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"标题"}},[t("el-col",{attrs:{span:11}},[t("el-input",{model:{value:e.bannerForm.title,callback:function(n){e.$set(e.bannerForm,"title",n)},expression:"bannerForm.title"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"是否启用"}},[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:e.bannerForm.enable,callback:function(n){e.$set(e.bannerForm,"enable",n)},expression:"bannerForm.enable"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"跳转链接"}},[t("el-input",{model:{value:e.bannerForm.link,callback:function(n){e.$set(e.bannerForm,"link",n)},expression:"bannerForm.link"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"图片"}},[t("el-col",{attrs:{span:11}},[t("uploader",{attrs:{"file-count":1,"on-success":e.bannerUploaded}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),t("el-button",{on:{click:function(n){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},a=[],o=t("10ba"),i=t("709b"),l={name:"BaseCreate",components:{Uploader:o["a"]},data:function(){return{bannerForm:{title:"",link:"",path:"",enable:1}}},methods:{bannerUploaded:function(e){var n=this;this.$nextTick(function(){n.bannerForm.path=e})},onSubmit:function(){var e=this,n=this.transformToFormData(this.bannerForm);console.log("submit",n),Object(i["a"])(n).then(function(n){e.$router.go(-1)}).catch(function(n){console.error(n),e.$message.error("创建失败")})},transformToFormData:function(e){var n=new FormData;for(var t in e)n.append(t,e[t]);return n}}},s=l,c=t("2877"),u=Object(c["a"])(s,r,a,!1,null,"8845a564",null);n["default"]=u.exports},"127f":function(e,n,t){"use strict";t("7f7f"),t("3b2b"),t("a481");var r={dateFormat:function(e,n){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var r in/(y+)/i.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+r+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return n}},a=t("9b15");n["a"]={randomString:function(e){for(var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t="",r=0;r<e;r++){var a=Math.ceil(35*Math.random());t+=n[a]}return t},createOssClient:function(){return new Promise(function(e,n){var t=new a({region:"oss-cn-hangzhou",accessKeyId:"LTAIzB8nL0N9FAVz",accessKeySecret:"wxciCikZ58748vfvGHhnGkt8FFaL0i",bucket:"after90s-dev"});e(t)})},ossUploadFile:function(e){var n=e.file,t=this;return new Promise(function(a,o){var i=r.dateFormat(new Date,"yyyyMMdd"),l=r.dateFormat(new Date,"yyyyMMddhhmmss"),s=t.randomString(4),c=n.name.substr(n.name.indexOf(".")),u="video/"+i+"/"+l+"_"+s+c;t.createOssClient().then(function(t){a({fileName:n.name,fileUrl:u}),t.put(u,n,{progress:function(n){var t={};t.percent=Math.floor(100*n),e.onProgress(t)}}).then(function(n){if(200===n.res.statusCode)return e.onSuccess(n),n;e.onError("上传失败")},function(n){e.onError("上传失败"),o(n)})})})}}},"709b":function(e,n,t){"use strict";t.d(n,"b",function(){return a}),t.d(n,"a",function(){return o}),t.d(n,"c",function(){return i});var r=t("b775");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])({url:"/banner/"+(e||""),method:"GET",data:n})}function o(e){return Object(r["a"])({url:"/banner",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}function i(e){return Object(r["a"])({url:"/banner/".concat(e),method:"DELETE"})}}}]);