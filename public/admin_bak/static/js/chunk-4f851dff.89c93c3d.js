(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f851dff"],{"127f":function(e,t,r){"use strict";r("7f7f"),r("3b2b"),r("a481");var a={dateFormat:function(e,t){var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var a in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t}},n=r("9b15");t["a"]={randomString:function(e){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r="",a=0;a<e;a++){var n=Math.ceil(35*Math.random());r+=t[n]}return r},createOssClient:function(){return new Promise(function(e,t){var r=new n({region:"oss-cn-hangzhou",accessKeyId:"LTAIzB8nL0N9FAVz",accessKeySecret:"wxciCikZ58748vfvGHhnGkt8FFaL0i",bucket:"after90s-dev"});e(r)})},ossUploadFile:function(e){var t=e.file,r=this;return new Promise(function(n,o){var s=a.dateFormat(new Date,"yyyyMMdd"),c=a.dateFormat(new Date,"yyyyMMddhhmmss"),l=r.randomString(4),i=t.name.substr(t.name.indexOf(".")),u="video/"+s+"/"+c+"_"+l+i;r.createOssClient().then(function(r){n({fileName:t.name,fileUrl:u}),r.multipartUpload(u,t,{progress:function(t){var r={};r.percent=Math.floor(100*t),e.onProgress(r)}}).then(function(t){if(200===t.res.statusCode)return e.onSuccess(t),t;e.onError("上传失败")},function(t){e.onError("上传失败"),o(t)})})})}}},"293c":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",[r("el-form",{ref:"form",attrs:{model:e.caseForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"标题"}},[r("el-col",{attrs:{span:11}},[r("el-input",{model:{value:e.caseForm.title,callback:function(t){e.$set(e.caseForm,"title",t)},expression:"caseForm.title"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"简介"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.caseForm.summary,callback:function(t){e.$set(e.caseForm,"summary",t)},expression:"caseForm.summary"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"用时"}},[r("el-col",{attrs:{span:6}},[r("el-input",{attrs:{placeholder:"如：3天2页"},model:{value:e.caseForm.duration,callback:function(t){e.$set(e.caseForm,"duration",t)},expression:"caseForm.duration"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"详情"}},[r("tinymce",{attrs:{menubar:""},model:{value:e.caseForm.description,callback:function(t){e.$set(e.caseForm,"description",t)},expression:"caseForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"地点"}},[r("el-col",{attrs:{span:11}},[r("el-input",{model:{value:e.caseForm.location,callback:function(t){e.$set(e.caseForm,"location",t)},expression:"caseForm.location"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"参与人数"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{type:"number"},model:{value:e.caseForm.people_count,callback:function(t){e.$set(e.caseForm,"people_count",t)},expression:"caseForm.people_count"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"图片"}},[r("el-col",{attrs:{span:11}},[r("uploader",{attrs:{"file-count":5,"on-success":e.albumsUploaded}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")]),e._v(" "),r("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")])],1)],1)],1)],1)},n=[],o=r("10ba"),s=r("d4f4"),c=r("8256"),l={name:"Index",components:{Tinymce:c["a"],Uploader:o["a"]},data:function(){return{caseForm:{title:"测试案例"+(new Date).toLocaleDateString(),summary:"summary",description:"des",duration:"一天",location:"杭州",people_count:"10",albums:""}}},created:function(){},methods:{onSubmit:function(){var e=this,t=this.transformToFormData(this.caseForm);console.log("submit",t),Object(s["a"])(t).then(function(t){e.$router.go(-1)}).catch(function(t){console.error(t),e.$message.error("创建失败")})},albumsUploaded:function(e){this.caseForm.albums=e},transformToFormData:function(e){var t=new FormData;for(var r in e)t.append(r,e[r]);return t}}},i=l,u=r("2877"),m=Object(u["a"])(i,a,n,!1,null,"23f376f3",null);t["default"]=m.exports},d4f4:function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return s});var a=r("b775");function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])({url:"/case/"+(e||""),method:"GET",data:t})}function o(e){return Object(a["a"])({url:"/case/create",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e})}function s(e){return Object(a["a"])({url:"/case/"+e,method:"DELETE"})}}}]);