(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62960f17"],{"127f":function(t,e,r){"use strict";r("7f7f"),r("3b2b"),r("a481");var n={dateFormat:function(t,e){var r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};for(var n in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return e}},o=r("9b15");e["a"]={randomString:function(t){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],r="",n=0;n<t;n++){var o=Math.ceil(35*Math.random());r+=e[o]}return r},createOssClient:function(){return new Promise(function(t,e){var r=new o({region:"oss-cn-hangzhou",accessKeyId:"LTAIzB8nL0N9FAVz",accessKeySecret:"wxciCikZ58748vfvGHhnGkt8FFaL0i",bucket:"after90s-dev"});t(r)})},ossUploadFile:function(t){var e=t.file,r=this;return new Promise(function(o,a){var c=n.dateFormat(new Date,"yyyyMMdd"),i=n.dateFormat(new Date,"yyyyMMddhhmmss"),s=r.randomString(4),l=e.name.substr(e.name.indexOf(".")),u="video/"+c+"/"+i+"_"+s+l;r.createOssClient().then(function(r){o({fileName:e.name,fileUrl:u}),r.multipartUpload(u,e,{progress:function(e){var r={};r.percent=Math.floor(100*e),t.onProgress(r)}}).then(function(e){if(200===e.res.statusCode)return t.onSuccess(e),e;t.onError("上传失败")},function(e){t.onError("上传失败"),a(e)})})})}}},"728c":function(t,e,r){"use strict";r.d(e,"b",function(){return o}),r.d(e,"a",function(){return a}),r.d(e,"c",function(){return c});var n=r("b775");function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n["a"])({url:"/partner/"+(t||""),method:"GET",data:e})}function a(t){return Object(n["a"])({url:"/partner/create",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:t})}function c(t){return Object(n["a"])({url:"/partner/"+t,method:"DELETE"})}},b889:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-card",[r("div",{attrs:{slot:"header"},slot:"header"},[t._v("合作")]),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.corpForm,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"伙伴名称"}},[r("el-col",{attrs:{span:11}},[r("el-input",{model:{value:t.corpForm.name,callback:function(e){t.$set(t.corpForm,"name",e)},expression:"corpForm.name"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"简介"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.corpForm.description,callback:function(e){t.$set(t.corpForm,"description",e)},expression:"corpForm.description"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"跳转地址"}},[r("el-col",{attrs:{span:11}},[r("el-input",{model:{value:t.corpForm.link,callback:function(e){t.$set(t.corpForm,"link",e)},expression:"corpForm.link"}})],1)],1),t._v(" "),r("el-form-item",{attrs:{label:"logo"}},[r("el-col",{attrs:{span:11}},[r("uploader",{attrs:{"file-count":1,"on-success":t.logoUploaded}})],1)],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")]),t._v(" "),r("el-button",{on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")])],1)],1)],1)],1)},o=[],a=r("728c"),c=r("10ba"),i={name:"Index",components:{Uploader:c["a"]},data:function(){return{corpForm:{name:"",logo:"",description:"",link:""}}},methods:{logoUploaded:function(t){var e=this;this.$nextTick(function(){e.corpForm.logo=t})},onSubmit:function(){var t=this,e=this.transformToFormData(this.corpForm);Object(a["a"])(e).then(function(e){t.$router.go(-1)}).catch(function(e){console.error(e),t.$message.error("创建失败")})},transformToFormData:function(t){var e=new FormData;for(var r in t)e.append(r,t[r]);return e}}},s=i,l=r("2877"),u=Object(l["a"])(s,n,o,!1,null,"09b68748",null);e["default"]=u.exports}}]);